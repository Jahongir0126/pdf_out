<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Заполнение PDF</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .form-section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px 15px 10px 15px;
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
        }

        .form-section h5 {
            margin-bottom: 18px;
            font-weight: 600;
        }

        .form-label {
            font-size: 0.97rem;
        }
    </style>
</head>

<body>
    <div class="container my-4">
        <h2 class="mb-4">Форма для заполнения PDF</h2>
        <form id="pdfForm">
            <div class="row">
                <div class="col-md-6 form-section">
                    <h5>Левая колонка</h5>
                    <div class="row g-2">
                        <div class="col-6"><label class="form-label">1. Фамилия <input type="text" class="form-control"
                                    name="lastName"></label></div>
                        <div class="col-6"><label class="form-label">2. Имя <input type="text" class="form-control"
                                    name="firstName"></label></div>
                        <div class="col-6"><label class="form-label">3. Отчество <input type="text" class="form-control"
                                    name="patronymic"></label></div>
                        <div class="col-3"><label class="form-label">4. Год <input type="text" class="form-control"
                                    name="birthYear"></label></div>
                        <div class="col-3"><label class="form-label">5. Месяц <input type="text" class="form-control"
                                    name="birthMonth"></label></div>
                        <div class="col-3"><label class="form-label">6. День <input type="text" class="form-control"
                                    name="birthDay"></label></div>
                        <div class="col-6"><label class="form-label">7. Место рождения <input type="text"
                                    class="form-control" name="birthPlace"></label></div>
                        <div class="col-3"><label class="form-label">8. 3.2 <input type="text" class="form-control"
                                    name="field32"></label></div>
                        <div class="col-3"><label class="form-label">9. 3.2 <input type="text" class="form-control"
                                    name="field32b"></label></div>
                        <div class="col-6"><label class="form-label">10. Национальность <input type="text"
                                    class="form-control" name="nationality"></label></div>
                        <div class="col-3"><label class="form-label">11. 5.2 <input type="text" class="form-control"
                                    name="field52"></label></div>
                        <div class="col-6"><label class="form-label">12. Фиркавийлиги <input type="text"
                                    class="form-control" name="party"></label></div>
                        <div class="col-6"><label class="form-label">13. Ёшлар уюшмаси <input type="text"
                                    class="form-control" name="youthUnion"></label></div>
                        <div class="col-3"><label class="form-label">14. 6.2 <input type="text" class="form-control"
                                    name="field62"></label></div>
                        <div class="col-6"><label class="form-label">15. Касаба уюшмаси <input type="text"
                                    class="form-control" name="tradeUnion"></label></div>
                        <div class="col-3"><label class="form-label">16. 7.2 <input type="text" class="form-control"
                                    name="field72"></label></div>
                        <div class="col-3"><label class="form-label">17. 8.1 <input type="text" class="form-control"
                                    name="field81"></label></div>
                        <div class="col-6"><label class="form-label">18. Маълумоти a) <input type="text"
                                    class="form-control" name="educationA"></label></div>
                        <div class="col-6"><label class="form-label">19. ОТМ номи <input type="text"
                                    class="form-control" name="university"></label></div>
                        <div class="col-3"><label class="form-label">20. 8.3 <input type="text" class="form-control"
                                    name="field83"></label></div>
                        <div class="col-3"><label class="form-label">21. 8.4 (в) <input type="text" class="form-control"
                                    name="field84v"></label></div>
                        <div class="col-3"><label class="form-label">22. 8.5 <input type="text" class="form-control"
                                    name="field85"></label></div>
                        <div class="col-3"><label class="form-label">23. 8.6 <input type="text" class="form-control"
                                    name="field86"></label></div>
                        <div class="col-3"><label class="form-label">24. 9.1 <input type="text" class="form-control"
                                    name="field91"></label></div>
                        <div class="col-3"><label class="form-label">25. 9.2 <input type="text" class="form-control"
                                    name="field92"></label></div>
                        <div class="col-3"><label class="form-label">26. 10.1 <input type="text" class="form-control"
                                    name="field101"></label></div>
                        <div class="col-6"><label class="form-label">27. Диплом рақами <input type="text"
                                    class="form-control" name="diplomaNumber"></label></div>
                        <div class="col-3"><label class="form-label">28. Год диплома <input type="text"
                                    class="form-control" name="diplomaYear"></label></div>
                        <div class="col-6"><label class="form-label">29. Кем выдан <input type="text"
                                    class="form-control" name="diplomaIssuedBy"></label></div>
                    </div>
                </div>
                <div class="col-md-6 form-section">
                    <h5>Правая колонка</h5>
                    <div class="row g-2">
                        <div class="col-6"><label class="form-label">30. Асосий касб <input type="text"
                                    class="form-control" name="mainProfession"></label></div>
                        <div class="col-6"><label class="form-label">31. Ихтисос бўйича иш стажи <input type="text"
                                    class="form-control" name="specialityExp"></label></div>
                        <div class="col-6"><label class="form-label">32. Умумий иш стажи <input type="text"
                                    class="form-control" name="totalExp"></label></div>
                        <div class="col-6"><label class="form-label">33. Узлуксиз стажи <input type="text"
                                    class="form-control" name="continuousExp"></label></div>
                        <div class="col-12"><label class="form-label">34. Охирги иш жойи <input type="text"
                                    class="form-control" name="lastWork"></label></div>
                        <div class="col-12"><label class="form-label">35. Сабаби <input type="text" class="form-control"
                                    name="reason"></label></div>
                        <div class="col-3"><label class="form-label">36. 14.3 <input type="text" class="form-control"
                                    name="field143"></label></div>
                        <div class="col-6"><label class="form-label">37. Оилавий ҳолати <input type="text"
                                    class="form-control" name="familyStatus"></label></div>
                        <div class="col-3"><label class="form-label">38. 15.2 <input type="text" class="form-control"
                                    name="field152"></label></div>
                        <div class="col-3"><label class="form-label">39. 15.3 <input type="text" class="form-control"
                                    name="field153"></label></div>
                        <div class="col-3"><label class="form-label">40. 15.4 <input type="text" class="form-control"
                                    name="field154"></label></div>
                        <div class="col-3"><label class="form-label">41. 16.1 <input type="text" class="form-control"
                                    name="field161"></label></div>
                        <div class="col-3"><label class="form-label">42. 16.2 <input type="text" class="form-control"
                                    name="field162"></label></div>
                        <div class="col-3"><label class="form-label">43. 17.1 <input type="text" class="form-control"
                                    name="field171"></label></div>
                        <div class="col-3"><label class="form-label">44. 17.2 <input type="text" class="form-control"
                                    name="field172"></label></div>
                        <div class="col-3"><label class="form-label">45. 18.1 <input type="text" class="form-control"
                                    name="field181"></label></div>
                        <div class="col-3"><label class="form-label">46. 18.2 <input type="text" class="form-control"
                                    name="field182"></label></div>
                        <div class="col-3"><label class="form-label">47. 19.1 <input type="text" class="form-control"
                                    name="field191"></label></div>
                        <div class="col-3"><label class="form-label">48. 19.2 <input type="text" class="form-control"
                                    name="field192"></label></div>
                        <div class="col-3"><label class="form-label">49. Паспорт серия <input type="text"
                                    class="form-control" name="passportSeries"></label></div>
                        <div class="col-6"><label class="form-label">50. Паспорт номер <input type="text"
                                    class="form-control" name="passportNumber"></label></div>
                        <div class="col-12"><label class="form-label">51. Кем выдан <input type="text"
                                    class="form-control" name="passportIssuedBy"></label></div>
                        <div class="col-3"><label class="form-label">52. 20.3 <input type="text" class="form-control"
                                    name="field203"></label></div>
                        <div class="col-6"><label class="form-label">53. Дата выдачи <input type="text"
                                    class="form-control" name="passportDate"></label></div>
                        <div class="col-3"><label class="form-label">54. 20.5 <input type="text" class="form-control"
                                    name="field205"></label></div>
                        <div class="col-12"><label class="form-label">55. Адрес <input type="text" class="form-control"
                                    name="address"></label></div>
                        <div class="col-3"><label class="form-label">56. 21.2 <input type="text" class="form-control"
                                    name="field212"></label></div>
                        <div class="col-6"><label class="form-label">57. Телефон <input type="text" class="form-control"
                                    name="phone"></label></div>
                        <div class="col-6"><label class="form-label">58. Имзо <input type="text" class="form-control"
                                    name="signature"></label></div>
                    </div>
                </div>
            </div>
            <div class="form-section">
                <h5>Харбий ҳисоб</h5>
                <div class="row g-2">
                    <div class="col-4"><label class="form-label">59. xisob guruh <input type="text" class="form-control"
                                name="militaryGroup"></label></div>
                    <div class="col-4"><label class="form-label">60. xisob turkumi <input type="text"
                                class="form-control" name="militaryType"></label></div>
                    <div class="col-4"><label class="form-label">61. tarkibi <input type="text" class="form-control"
                                name="militaryStructure"></label></div>
                    <div class="col-4"><label class="form-label">62. xarbiy unvoni <input type="text"
                                class="form-control" name="militaryRank"></label></div>
                    <div class="col-4"><label class="form-label">63. xarbiy unvoni2 <input type="text"
                                class="form-control" name="militaryRank2"></label></div>
                    <div class="col-4"><label class="form-label">64. xisobga olngan ixtisosi <input type="text"
                                class="form-control" name="militarySpeciality"></label></div>
                    <div class="col-2"><label class="form-label">65. № <input type="text" class="form-control"
                                name="militaryNumber"></label></div>
                    <div class="col-3"><label class="form-label">66. yaroqliligi <input type="text" class="form-control"
                                name="militaryValid"></label></div>
                    <div class="col-3"><label class="form-label">67. komisiya nomi <input type="text"
                                class="form-control" name="militaryCommission"></label></div>
                    <div class="col-3"><label class="form-label">68. komisiya nomi2 <input type="text"
                                class="form-control" name="militaryCommission2"></label></div>
                    <div class="col-4"><label class="form-label">69. Maxsus ҳисоб <input type="text"
                                class="form-control" name="militarySpecial"></label></div>
                </div>
            </div>
            <button type="submit" class="btn btn-primary me-2">Сгенерировать PDF (с фоном)</button>
            <button type="button" id="genBezFona" class="btn btn-secondary">Сгенерировать PDF (без фона)</button>
        </form>
        <div id="result" class="mt-4"></div>
    </div>
    <script>
        document.getElementById('pdfForm').onsubmit = async function (e) {
            e.preventDefault();
            const form = e.target;
            const data = {};
            for (const el of form.elements) {
                if (el.name) data[el.name] = el.value;
            }
            const res = await fetch('/generate', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });
            if (res.ok) {
                const blob = await res.blob();
                const url = URL.createObjectURL(blob);
                document.getElementById('result').innerHTML = `<a href="${url}" download="result_fon.pdf" class="btn btn-success">Скачать PDF (с фоном)</a>`;
            } else {
                document.getElementById('result').textContent = 'Ошибка при генерации PDF';
            }
        };

        // Генерация PDF без фона
        const genBezFonaBtn = document.getElementById('genBezFona');
        genBezFonaBtn.onclick = async function () {
            const form = document.getElementById('pdfForm');
            const data = {};
            for (const el of form.elements) {
                if (el.name) data[el.name] = el.value;
            }
            const res = await fetch('/generate-bez-fona', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });
            if (res.ok) {
                const blob = await res.blob();
                const url = URL.createObjectURL(blob);
                document.getElementById('result').innerHTML = `<a href="${url}" download="result_bez-fona.pdf" class="btn btn-success">Скачать PDF (без фона)</a>`;
            } else {
                document.getElementById('result').textContent = 'Ошибка при генерации PDF';
            }
        };
    </script>
</body>

</html>